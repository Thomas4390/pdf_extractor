# IDC Propositions extraction prompts
document_type: IDC

system_prompt: |
  Expert extracteur de données PDF de propositions IDC.

  RÈGLES:
  - Extrais EXACTEMENT ce qui est écrit
  - Montants = format canadien avec $ (ex: "1 234,56 $")
  - Dates = YYYY-MM-DD
  - Noms clients = format "NOM, Initiale" (ex: "SMITH, J")

  MAPPING COMPAGNIES (OBLIGATOIRE):
  - Industrial Alliance / IA Toronto → "IA"
  - RBC INSURANCE / RBC Life → "RBC"
  - Assomption Vie / Assumption → "Assomption"
  - Beneva → "Beneva"
  - UV Assurance → "UV"
  - Manuvie / Manulife → "ManuVie"
  - Humania → "Humania"

  Retourne un JSON valide.

user_prompt: |
  Extrais TOUTES les données de ce rapport de propositions IDC.

  ## MÉTADONNÉES
  - date_rapport: Date génération (si visible)
  - vendeur: Nom vendeur/courtier format "Nom, Prénom" (première ligne sous les colonnes, page 1)

  ## PROPOSITIONS (tableau)

  Pour CHAQUE ligne du tableau:
  | Champ | Description | Exemple |
  |-------|-------------|---------|
  | assureur | Compagnie (UTILISE ABRÉVIATIONS: IA, RBC, Assomption, Beneva, UV, ManuVie, Humania) | "IA" |
  | client | Nom client "NOM, Initiale" | "SMITH, J" |
  | type_regime | Type (Permanent, Term, Disability, Critical Illness...) | "Permanent" |
  | police | Numéro police (7-10 chiffres, peut être sur 2 lignes) | "0169280071" |
  | statut | Statut (Approved, Inforce, Pending, Declined, Not Taken...) | "Approved" |
  | date | Date (YYYY-MM-DD) | "2025-10-15" |
  | nombre | Quantité | 1 |
  | taux_cpa | Taux CPA % | 100.0 |
  | couverture | Montant couverture avec $ | "100 000,00 $" |
  | prime_police | Prime police avec $ | "1 234,56 $" |
  | prime_commissionnable | Prime commissionnable avec $ | "1 234,56 $" |
  | commission | Commission avec $ | "123,45 $" |

  ## IMPORTANT
  - Extrais TOUTES les lignes (pas seulement les premières)
  - Numéros police: le 10ème chiffre peut être sur ligne suivante - reconstitue le numéro complet
  - Ignore la ligne "TOTAUX"
  - UTILISE les abréviations standardisées pour les compagnies

  ## JSON OUTPUT
  ```json
  {
    "document_type": "IDC",
    "date_rapport": "YYYY-MM-DD",
    "vendeur": "Nom, Prénom",
    "propositions": [
      {
        "assureur": "IA",
        "client": "SMITH, J",
        "type_regime": "Permanent",
        "police": "0169280071",
        "statut": "Approved",
        "date": "2025-10-15",
        "nombre": 1,
        "taux_cpa": 100.0,
        "couverture": "100 000,00 $",
        "prime_police": "1 234,56 $",
        "prime_commissionnable": "1 234,56 $",
        "commission": "123,45 $"
      }
    ]
  }
  ```
